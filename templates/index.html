<!doctype html>
<html>
    <head>
        <title>CashStream - Currency Analytics</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://cdn.tailwindcss.com"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/js/all.min.js" integrity="sha512-2bMhOkE/ACz21dJT8zBOMgMecNxx0d37NND803ExktKiKdSzdwn+L7i9fdccw/3V06gM/DBWKbYmQvKMdAA9Nw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script>
            tailwind.config = {
                theme: {
                    extend: {}
                }
            }
        </script>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Lilita+One&family=Poppins:wght@400;700&display=swap" rel="stylesheet">
        <script src="https://code.jquery.com/jquery-3.6.4.min.js" integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.6.4/datepicker.min.js"></script>
    </head>
    <body>
        <!-- Site Header Section -->
        <nav aria-label="Site Nav" class="mx-auto flex max-w-3xl items-center justify-between p-4">
            <a href="/" class="inline-flex items-center justify-center rounded-lg p-2">
                <span class="sr-only">Logo</span>
                <i class="fa-solid fa-chart-simple fa-lg text-blue-600"></i>
                &nbsp;&nbsp;
                <span class="font-bold text-blue-600" style="font-family: Poppins">CashStream</span>
            </a>
            <ul class="flex items-center gap-2 text-sm font-medium text-gray-500">
                <li class="hidden lg:block">
                    <a class="rounded-lg px-3 py-2 hover:text-blue-600" href="/"><i class="fa-solid fa-home"></i>&nbsp;&nbsp;Home</a>
                </li>
                <li>
                    <a class="rounded-lg px-3 py-2 hover:text-blue-600" href=""><i class="fa-solid fa-arrows-rotate"></i>&nbsp;&nbsp;Sync Rates</a>
                </li>
            </ul>
        </nav>
        <!-- Site Content Section -->
        <section class="mx-auto max-w-3xl p-4 my-8">
            <!-- Live Currency Banners -->
            <div class="mb-4">
                <div class="flex justify-start content-center items-center text-xl font-bold text-indigo-600" style="font-family: Poppins;">
                    <span class="relative flex h-3 w-3">
                        <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span>
                        <span class="relative inline-flex rounded-full h-3 w-3 bg-red-500"></span>
                    </span>    
                    <span class="">&nbsp;&nbsp;Live Currency Rates</span>
                </div>
                <div class="block mx-auto md:grid grid-cols-2">
                    <article class="m-2 flex items-end justify-between rounded-lg border border-gray-100 bg-white p-6" style="box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 2px 6px 2px;">
                        <div class="flex items-center gap-4">
                            <span class="hidden rounded-full bg-gray-100 p-2 text-gray-600 sm:block">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z" />
                                </svg>
                            </span>
                            <div>
                                <p class="text-sm font-semibold text-gray-500" style="font-family: Poppins">PKR - USD</p>
                                <p class="text-xl font-medium text-gray-900">$ {{live_usd}}</p>
                            </div>
                        </div>
                        <div class="inline-flex gap-2 rounded bg-red-100 p-1 text-red-600">
                            <span class="text-xs font-medium"><i class="fa-solid fa-arrow-trend-down"></i> 50.25%</span>
                        </div>
                    </article>
                    <article class="m-2 flex items-end justify-between rounded-lg border border-gray-100 bg-white p-6" style="box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 2px 6px 2px;">
                        <div class="flex items-center gap-4">
                            <span class="hidden rounded-full bg-gray-100 p-2 text-gray-600 sm:block">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z" />
                                </svg>
                            </span>
                            <div>
                                <p class="text-sm font-semibold text-gray-500" style="font-family: Poppins">USD - PKR</p>
                                <p class="text-xl font-medium text-gray-900">Rs {{live_pkr}}</p>
                            </div>
                        </div>
                        <div class="inline-flex gap-2 rounded bg-green-100 p-1 text-green-600">
                            <span class="text-xs font-medium"><i class="fa-solid fa-arrow-trend-up"></i> 50.25%</span>
                        </div>
                    </article>
                </div>
                <p class="text-center text-sm text-gray-500 my-2"><i class="fa-solid fa-rotate-right"></i>&nbsp;<i>Last refreshed today</i></p>
            </div>
            <!-- Predicted Currency Banner -->
            <div class="my-6">
                <h2 class="text-xl font-bold text-indigo-600" style="font-family: Poppins;"><i class="fa-solid text-green-500 fa-circle-nodes"></i>&nbsp;&nbsp;Predicted Currency Rates</h2>
                <div class="block mx-auto md:grid grid-cols-2">
                    <article class="m-2 flex items-end justify-between rounded-lg border border-gray-100 bg-white p-6" style="box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 2px 6px 2px;">
                        <div class="flex items-center gap-4">
                            <span class="hidden rounded-full bg-gray-100 p-2 text-gray-600 sm:block">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z" />
                                </svg>
                            </span>
                            <div>
                                <p class="text-sm font-semibold text-gray-500" style="font-family: Poppins">PKR - USD</p>
                                <p class="text-xl font-medium text-gray-900">$ {{pred_usd}}</p>
                            </div>
                        </div>
                        <!-- <div class="inline-flex gap-2 rounded bg-red-100 p-1 text-red-600">
                            <span class="text-xs font-medium"><i class="fa-solid fa-arrow-trend-down"></i> 50.25%</span>
                        </div> -->
                    </article>
                    <article class="m-2 flex items-end justify-between rounded-lg border border-gray-100 bg-white p-6" style="box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 2px 6px 2px;">
                        <div class="flex items-center gap-4">
                            <span class="hidden rounded-full bg-gray-100 p-2 text-gray-600 sm:block">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z" />
                                </svg>
                            </span>
                            <div>
                                <p class="text-sm font-semibold text-gray-500" style="font-family: Poppins">USD - PKR</p>
                                <p class="text-xl font-medium text-gray-900">Rs {{pred_pkr}}</p>
                            </div>
                        </div>
                        <!-- <div class="inline-flex gap-2 rounded bg-green-100 p-1 text-green-600">
                            <span class="text-xs font-medium"><i class="fa-solid fa-arrow-trend-up"></i> 50.25%</span>
                        </div> -->
                    </article>
                </div>
                <p class="text-center text-sm text-gray-500 my-2"><i class="fa-solid fa-triangle-exclamation"></i>&nbsp;<i>This model was last trained on 22/03/2023 and is only capable of predicting upto 10 days in future.</i></p>
            </div>
            <!-- Live Data Input Form -->
            <div>
                <div class="mx-auto max-w-screen-xl px-4 py-16 sm:px-6 lg:px-8">
                    <div class="mx-auto max-w-lg">
                        <h1 class="text-center text-2xl font-bold text-indigo-600 sm:text-3xl" style="font-family: Poppins;">
                            Live Accuracy Measure
                        </h1>
                        <p class="mx-auto mt-4 max-w-md text-center text-gray-500">
                            Enter live exchange rate data to measure the model accuracy.
                        </p>
                        <form action="" class="mt-6 mb-0 space-y-4 rounded-lg p-4 shadow-lg sm:p-6 lg:p-8">
                            <div class="grid grid-cols-2 gap-6">
                                <div class="">
                                    <label for="price1" class="block text-sm font-medium leading-6 text-gray-900">Currency 01</label>
                                    <div class="relative mt-2 rounded-md shadow-sm">
                                        <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
                                            <span id="currency1_Icon" class="text-gray-500 sm:text-sm"><i class='fa-solid fa-dollar-sign'></i></span>
                                        </div>
                                        <input required type="number" step="0.01" name="price1" id="price1" class="block w-full rounded-md outline-0 border-0 py-1.5 pl-8 pr-20 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6" placeholder="0.00">
                                        <div class="absolute inset-y-0 right-2 flex items-center">
                                            <label for="currency1" class="sr-only">Currency</label>
                                            <select id="currency1" name="currency1" class="h-full cursor-pointer rounded-md border-0 bg-transparent py-0 pl-2 pr-2 text-gray-500 outline-0 focus:ring-0 sm:text-sm">
                                                <option value="USD" selected>USD</option>
                                                <option value="PKR">PKR</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="">
                                    <label for="price2" class="block text-sm font-medium leading-6 text-gray-900">Currency 02</label>
                                    <div class="relative mt-2 rounded-md shadow-sm">
                                        <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
                                            <span id="currency2_Icon" class="text-gray-500 sm:text-sm"><i class='fa-solid fa-rupee-sign'></i></span>
                                        </div>
                                        <input required type="number" step="0.01" name="price2" id="price2" class="block w-full rounded-md outline-0 border-0 py-1.5 pl-8 pr-20 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6" placeholder="0.00">
                                        <div class="absolute inset-y-0 right-2 flex items-center">
                                            <label for="currency2" class="sr-only">Currency</label>
                                            <select id="currency2" name="currency2" class="h-full cursor-pointer rounded-md border-0 bg-transparent py-0 pl-2 pr-2 text-gray-500 outline-0 focus:ring-0 sm:text-sm">
                                                <option value="PKR" selected>PKR</option>
                                                <option value="USD">USD</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="relative max-w-sm mx-auto">
                                <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                                  <svg aria-hidden="true" class="w-5 h-5 text-gray-500" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path></svg>
                                </div>
                                <input required id="currencyDate" name="date" datepicker datepicker-autohide datepicker-format="dd-mm-yyyy" datepicker type="text" class="border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5" placeholder="Select Date">
                            </div>
                            <br/>
                            <div class="block text-center">
                                <button class="group relative inline-block text-base font-medium text-white focus:outline-none focus:ring">
                                    <span class="absolute inset-0 border border-blue-600 group-active:border-blue-500"></span>
                                    <span class="block border border-blue-600 bg-blue-600 px-10 py-2 transition-transform active:border-blue-500 active:bg-blue-500 group-hover:-translate-x-1 group-hover:-translate-y-1">
                                        <i class="fa-solid fa-percent"></i>&nbsp;&nbsp;Measure
                                    </span>
                                </button>
                            </div>
                            <p class="text-center text-base text-gray-600 font-semibold" style="font-family: Poppins;">Model Accuracy&nbsp;&nbsp;<span id="modelAccuracy" class="text-blue-600">NA</span>%</p>
                        </form>
                    </div>
                </div>
  
            </div>
        </section>

        <!-- Site Footer Section -->
        <footer aria-label="Site Footer" class="bg-gray-100">
            <div class="mx-auto max-w-5xl px-4 py-16 sm:px-6 lg:px-8">
                <div class="flex justify-center text-blue-600">
                    <i class="fa-solid fa-chart-simple fa-lg text-blue-600"></i>
                    &nbsp;&nbsp;
                    <span class="font-bold text-blue-600" style="font-family: Poppins">CashStream</span>
                </div>
          
                <p class="mx-auto mt-4 max-w-md text-center leading-relaxed text-gray-500">
                    Your online currency rates analytics dashboard. Monitor currency rates as they change in real-time.
                </p>
            
                <nav aria-label="Footer Nav" class="mt-6">
                    <ul class="flex flex-wrap justify-center gap-6 md:gap-8 lg:gap-12">
                        <li>
                            <a class="text-gray-700 transition hover:text-gray-700/75" href="/">
                                About
                            </a>
                        </li>        
                        <li>
                            <a class="text-gray-700 transition hover:text-gray-700/75" href="/">
                                History
                            </a>
                        </li>
                        <li>
                            <a class="text-gray-700 transition hover:text-gray-700/75" href="/">
                                Services
                            </a>
                        </li>
                        <li>
                            <a class="text-gray-700 transition hover:text-gray-700/75" href="/">
                                Privacy
                            </a>
                        </li>
                    </ul>
                </nav>
            
                <ul class="mt-6 flex justify-center gap-6 md:gap-8">
                    <li>
                        <a
                            href="/"
                            rel="noreferrer"
                            target="_blank"
                            class="text-gray-700 transition hover:text-gray-700/75"
                        >
                            <span class="sr-only">Instagram</span>
                            <svg
                            class="h-6 w-6"
                            fill="currentColor"
                            viewBox="0 0 24 24"
                            aria-hidden="true"
                            >
                                <path
                                    fill-rule="evenodd"
                                    d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z"
                                    clip-rule="evenodd"
                                />
                            </svg>
                        </a>
                    </li>
            
                    <li>
                        <a
                            href="/"
                            rel="noreferrer"
                            target="_blank"
                            class="text-gray-700 transition hover:text-gray-700/75"
                        >
                            <span class="sr-only">Twitter</span>
                            <svg
                            class="h-6 w-6"
                            fill="currentColor"
                            viewBox="0 0 24 24"
                            aria-hidden="true"
                            >
                                <path
                                    d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"
                                />
                            </svg>
                        </a>
                    </li>
                    <li>
                        <a
                            href="/"
                            rel="noreferrer"
                            target="_blank"
                            class="text-gray-700 transition hover:text-gray-700/75"
                        >
                            <span class="sr-only">GitHub</span>
                            <svg
                            class="h-6 w-6"
                            fill="currentColor"
                            viewBox="0 0 24 24"
                            aria-hidden="true"
                            >
                                <path
                                    fill-rule="evenodd"
                                    d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"
                                    clip-rule="evenodd"
                                />
                            </svg>
                        </a>
                    </li>
                </ul>
            </div>
        </footer>   
        <script>
            $(document).ready(function() {
                // Update currency 1 icon on select change
                $('#currency1').on("change",function () {
                    var currency1 = $(this).val();
                    var currency1Icon = "";
                    if(currency1 === "PKR") {
                        currency1Icon = "<i class='fa-solid fa-rupee-sign'></i>";
                    }
                    else if(currency1 === "USD") {
                        currency1Icon = "<i class='fa-solid fa-dollar-sign'></i>";
                    }
                    $("#currency1_Icon").html(currency1Icon);
                });
                // Update currency 2 icon on select change
                $('#currency2').on("change",function () {
                    var currency2 = $(this).val();
                    var currency2Icon = "";
                    if(currency2 === "PKR") {
                        currency2Icon = "<i class='fa-solid fa-rupee-sign'></i>";
                    }
                    else if(currency2 === "USD") {
                        currency2Icon = "<i class='fa-solid fa-dollar-sign'></i>";
                    }
                    $("#currency2_Icon").html(currency2Icon);
                });
                // Handle form submit
                $("form").submit(function (event) {
                    event.preventDefault();
                    var type1 = $("#currency1").val();
                    var type2 = $("#currency2").val();
                    var type = "";
                    if(type1 === "PKR" && type2 === "USD") {
                        var type = "PKR_TO_USD";
                    }
                    else if(type1 === "USD" && type2 === "PKR") {
                        var type = "USD_TO_PKR";
                    }
                    else {
                        alert("Please select different currencies!");
                        return;
                    }
                    var formData = {
                        currency1: $("#price1").val(),
                        currency2: $("#price2").val(),
                        conversionType: type,
                        date: $("#currencyDate").val(),
                    };
                    console.log(formData)
                    $("#modelAccuracy").html("Loading...");
                    $.ajax({
                        type: "POST",
                        url: "/api/predict",
                        data: formData,
                        dataType: "json",
                        encode: true,
                    }).done(function (data) {
                        $("#modelAccuracy").html(data.accuracy);
                    });
                });
            });
        </script>
    </body>
</html>